#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
 
// Programa Ref_063_fichEscreverFile

// Atenção
// Correr este programa no Dev-C++ devido as incompatibilidades dos
// comandos padrão de ficheiros com os mesmos comandos da microsoft

// Introdução aos ficheiros

// escreve caracteres num ficheiro


/*
   Até ao momento, todos os dados têm sido inseridos nos programas através do 
   teclado, sendo guardados em variáveis, as quais residem em memória central 
   (RAM - memória primária e volátil).

   Esta apresenta inconvenientes de ser volátil e cara, pelo que não se torna 
   interessante para o armazenamento durante periodos que excedam o de execução 
   de um programa. 

   Para armazenamentos mais demorados é utilizado outro meio, a memória secundária 
   (disco rígido), em que a informação é armazenada sob a forma de ficheiros. 
   
   A linguagem C permite dois tipos de ficheiros : binário ou texto. 

   Ficheiros binários são destinados principalmente para o armazenamento de 
   registos (estruturas).    
    
   Ficheiros de texto são destinados principalmente para o armazenamento de 
   texo normal (byte-a-byte, ou seja, caracter-a-caracter).  


   Abertura e Fecho de Ficheiros 

   O ficheiro stdio.h contém definições e declarações necessárias às funções standards 
   de manipulação de ficheiros. 
      
   Nos programas em linguagem C um ficheiro é especificado em termos de um apontador para 
   um FILE que é obtido pela chamada à função fopen.
 
   O utilizador não necessita conhecer os membros de uma estrutura FILE. 
   A sintaxe da função de abertura de ficheiros num programa em C é: 

   FILE *fopen(char nome_do_ficheiro[], char modo[]); 

   A função fopen() devolve um apontador para um FILE, que passa a ser utilizado 
   em todos os acessos ao ficheiro. O primeiro argumento é o nome do ficheiro a ser aberto. 
 
   O segundo argumento é o modo de abertura. 
   Algumas das possibilidades para o argumento modo são: 

   r: Abertura para leitura.Dá erro se o ficheiro não existe. 

   w: Abertura para escrita.Se o ficheiro existir o conteúdo é apagado. 
      Se não existir, o ficheiro é criado. 

   a: Abertura para adição no fim do ficheiro.Se este existir então os novos dados   
      serão escritos no fim do ficheiro.Se o ficheiro não existir então será criado.
 
   r+: Abertura do ficheiro para leitura e escrita. 

   b,t: Conforme se trate de um ficheiro do tipo binário ou do tipo texto, adiciona-se 
        b ou t a qualquer uma das opções anteriores (e.g.:wb). 

   A função fopen() retorna NULL se ocorrer um erro na abertura. 

   Após ser realizado o processo sobre um ficheiro aberto à que fechá-lo. 
   A operação de fecho de um ficheiro é feita pela função : 

   fclose (FILE *fp); 

   Esta função desaloca a estrutura FILE respectiva e fecha o ficheiro apontado por fp. 
   Em caso de erro (i.e. fechar um ficheiro que ainda não foi aberto) retorna EOF, caso 
   contrário retorna zero. 


   Funções orientadaa ao Caracter:
 
   As rotinas mais primitivas de input e output são fgetc e fputc.

   Estas rotinas lêm ou escrevem um caracter de cada vez, de e para um ficheiro que é 
   especificado pelo apontador FILE obtido da chamada de fopen(). 

   A chamada 

	ch = fgetc(fp); 

   Retorna o próximo caracter de um ficheiro especificado por fp ou EOF se foi encontrado 
   o fim do ficheiro (ou, se ocorreu um erro). 
 
   A chamada 

	fputc(ch,fp); 

   escreve o caracter em ch no ficheiro especificado por fp. 
*/

int main(int argc, char *argv[]) 
{
	setlocale(LC_ALL, "Portuguese");

	FILE *fp;
	
	char texto[]="A cidade de Lisboa";

	int i;
	fp = fopen("dados.txt", "w");
	
	if (fp != NULL)
	{
		for (i=0; texto[i]; i++)
		{
			fputc(texto[i], fp);
		}
		printf("\n\nTexto escrito no fich dados.txt\n\n");
	
		fclose(fp);
	}
	else
	{
		printf("\n\nTexto NAO foi escrito no file\n\n");
	}
	
	return 0;
}
